
@{
    ViewBag.Title = "Conexiones";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="secondary-font-bold mt-4 secondary-font-bold">Lista de Conexiones</h1>
<ol class="breadcrumb secondary-font-oblique mb-4 mt-4 ">
    <li class="breadcrumb-item"><a href="@Url.Action("Index", "EmpleadoAdmin")">Lista de Empleados</a></li>
    <li class="breadcrumb-item active">Lista de Conexiones</li>
</ol>

<div class="card">
    <div class="card-header">
        <i class="fas fa-clock fa-lg m-1"></i> Lista de Conexiones
    </div>

    <div class="card-body">
        <div class="row">
            <h1 id="EmpleadoInfo" style="color: #000000">
            </h1>
            <div class="col-sm-12 text-left">
                <button type="button" class="btn btn-secondary" onclick=""><i class="fas fa-file-pdf fa-lg m-1"></i>Generar Reporte</button>
            </div>
        </div>

        <hr />

        <table id="tablaConexiones" class="display cell-border" style="width: 100%">
            <thead>
                <tr>
                    <th>Inicio Sesion</th>
                    <th>Cerro Sesión</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

    </div>
</div>

@section scripts{

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>

    <script>
        // Supongamos que tienes un objeto conexionesData con las conexiones
        var conexionesData = @Html.Raw(Json.Encode(ViewBag.Conexiones));

        // Inicializa DataTable en la tabla con el ID "tablaConexiones"
        var tablaConexiones = $('#tablaConexiones').DataTable({
            data: conexionesData,
            columns: [
                {
                    data: "FechaConexion",
                    render: function (data, type, row) {
                        return moment(data).format("DD/MM/YYYY HH:mm:ss");
                    }
                },
                {
                    data: "FechaDesconexion",
                    render: function (data, type, row) {
                        return moment(data).format("DD/MM/YYYY HH:mm:ss");
                    }
                }
            ],
            "language": {
                "url": '//cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json',
            },
        });

        $(document).ready(function () {
            // Asigna los valores del cliente cuando el documento esté listo
            $("#EmpleadoInfo").html("EmpleadoID: " + conexionesData[0].Empleado.EmpleadoID);
        });
    </script>

}

